{{ self.title() }}

考虑最后卖了哪些史莱姆。

这些史莱姆必须能分成两个和均小于 $k$ 的区间。

记 $f(l,r)$ 为区间 $[l,r]$ 的答案。

记 $g_1(l,r,p_1)$ 为，从 $l$ 开始选了总质量为 $p_1$ 作为第一段且最后一个位置选了 $r$ 的答案，区间里被选的部分不贡献代价。

记 $g_2(l,r,p_1,p_2)$ 为……且选了总质量为 $p_2$ 作为第二段的答案，区间里被选的部分不贡献代价。

然后转移，注意 $f(l,r)$ 选最后卖的时候不能选和 $l-1$ 或 $r+1$ 颜色相同的。 
